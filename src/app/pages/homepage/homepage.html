<form [formGroup]="trustForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data" class="p-4 shadow rounded bg-light">
  <h2 class="mb-4">ðŸ‡­ðŸ‡° Application for Hong Kong Foreign Trust</h2>

  <!-- General Applicant Information -->
<div class="mb-3">
  <div class="row g-3">
    <!-- Full Names -->
    <div class="col-md-6">
      <label>Full Names and Surname *</label>
      <input formControlName="fullName" type="text" class="form-control" placeholder="Full name" />
    </div>

    <!-- Passport or ID Number -->
    <div class="col-md-6">
      <label>Passport or ID Number *</label>
      <input formControlName="idNumber" type="text" class="form-control" />
    </div>
  </div>
</div>

<div class="mb-3">
  <div class="row g-3">
    <!-- Email -->
    <div class="col-md-6">
      <label>Email *</label>
      <input formControlName="email" type="email" class="form-control" placeholder="Your email" />
    </div>

    <!-- Phone Number -->
    <div class="col-md-6">
      <label>Phone Number *</label>
      <input formControlName="phoneNumber" type="text" class="form-control" />
    </div>
  </div>
</div>


 <!-- TRUST DETAILS CARD -->
<div class="card border-primary shadow-sm mb-4">
  <div class="card-header bg-primary text-white">
    ðŸ§¾ Trust Structure & Details
  </div>
  <div class="card-body">

    <!-- Trust Email -->
    <div class="mb-3">
      <label>Trust Email (A private email for your trust if any)</label>
      <div class="d-flex align-items-center gap-3">
        <input formControlName="trustEmail" type="email" class="form-control"
               [readonly]="useUserEmailForTrustEmail" style="max-width: 300px;" placeholder="Optional trust email" />
        <div class="form-check mb-0">
          <input class="form-check-input" type="checkbox" id="useUserEmailCheckbox"
                 [checked]="useUserEmailForTrustEmail" (change)="toggleUseUserEmailForTrustEmail($event)" />
          <label class="form-check-label" for="useUserEmailCheckbox" style="white-space: nowrap;">
            Use my email for Trust Email
          </label>
        </div>
      </div>
    </div>

    <!-- Trust Name -->
    <div class="mb-3">
      <label>Name of Trust (e.g. The Zeng Zong Hong Kong Foreign Trust) *</label>
      <div class="d-flex align-items-center gap-3">
        <input formControlName="trustName" type="text" class="form-control"
               style="max-width: 300px;" placeholder="Trust Name" />
        <div *ngIf="trustForm.get('trustName')?.value" class="text-muted">
          <em>The </em><span class="fw-normal">{{ trustForm.get('trustName')?.value }}</span><em> Hong Kong Foreign Trust</em>
        </div>
      </div>
    </div>

    <!-- Establishment Date -->
    <div class="mb-3">
      <label>Date of Establishment *</label>
      <div class="d-flex align-items-center gap-3">
        <input formControlName="establishmentDate" type="date" class="form-control"
               [min]="minDate" style="max-width: 300px;" />
        <div *ngIf="trustForm.get('establishmentDate')?.value" class="text-muted">
          <em>{{ trustForm.get('establishmentDate')?.value | date: 'd MMMM yyyy' }}</em>
        </div>
      </div>
    </div>

    <!-- Settlor & Trustee 1 Combined Card -->
    <div class="mb-3">
      <label class="form-label">Settlor & Trustee 1 Details</label>
      <div class="card bg-white border p-3">
        <div class="row">
          <!-- Settlor -->
          <div class="col-md-6 mb-3 mb-md-0">
            <h6 class="text-primary">Settlor</h6>
            <label>Full Name *</label>
            <input type="text" [value]="trustForm.get('fullName')?.value" class="form-control mb-2" readonly />
            <label>ID / Passport No *</label>
            <input type="text" [value]="trustForm.get('idNumber')?.value" class="form-control" readonly />
          </div>

          <!-- Trustee 1 -->
          <div class="col-md-6">
            <h6 class="text-primary">Trustee 1</h6>
            <div [formGroup]="firstTrustee">
              <label>Full Name *</label>
              <input type="text" formControlName="name" class="form-control mb-2" readonly />
              <label>ID / Passport No *</label>
              <input type="text" formControlName="id" class="form-control" readonly />
            </div>
          </div>
        </div>
      </div>
    </div>

   <!-- Trustees 2+ Section: Two per row -->
<div class="mb-3">
  <label class="form-label">Trustee 2 and Additional Trustees</label>
  <div class="row g-3">

    <!-- Trustee 2 (Compulsory) -->
    <div class="col-md-6" [formGroup]="secondTrustee">
      <div class="border p-3 rounded bg-white h-100">
        <label class="form-label">Trustee 2</label>
        <label>Full Name *</label>
        <input type="text" formControlName="name" class="form-control mb-2" />
        <label>ID / Passport No *</label>
        <input type="text" formControlName="id" class="form-control" />
      </div>
    </div>

    <!-- Additional Trustees (Optional) -->
    <ng-container *ngFor="let trustee of trustees.controls; let i = index">
      <div *ngIf="i > 1" class="col-md-6" [formGroupName]="i">
        <div class="border p-3 rounded bg-white h-100">
          <label class="form-label">Trustee {{ i + 1 }} (Optional)</label>
          <label>Full Name</label>
          <input type="text" formControlName="name" class="form-control mb-2" />
          <label>ID / Passport No</label>
          <input type="text" formControlName="id" class="form-control" />
        </div>
      </div>
    </ng-container>
  </div>

  <!-- Add Trustee Button -->
  <div class="mt-3">
    <button type="button" (click)="addTrustee()" class="btn btn-outline-secondary">
      âž• Add Another Trustee
    </button>
  </div>
</div>


    <!-- Beneficiaries -->
    <div class="mb-3">
      <label>List of Beneficiaries (with optional ID / Reg No)</label>
      <textarea formControlName="beneficiaries" class="form-control" rows="4"
                placeholder="e.g. John Doe - 9201015000087"></textarea>
    </div>

    <!-- Upload Documents -->
    <div class="mb-3">
      <label>Upload ID / Passport Documents (Settlor and Trustees) *</label>
      <input type="file" multiple (change)="onFileChange($event)" class="form-control" />
    </div>

  </div>
</div>

<!-- Submit -->
<button type="submit" class="btn btn-primary" [disabled]="trustForm.invalid">Submit Application</button>

